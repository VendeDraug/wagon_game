<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Wagon Race üèé</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <h1 class="text-center">Wagon Race</h1>
    <hr>
      <table class="racer_table">
        <tr id="player1_race">
          <td class="col-xs-1 track_box first active"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box last"></td>
        </tr>
        <tr id="player2_race">
          <td class="col-xs-1 track_box first active"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box"></td>
          <td class="col-xs-1 track_box last"></td>
        </tr>
      </table>
    <hr>

    <script>
      const playerOne = document.getElementById("player1_race");
      const playerTwo = document.getElementById("player2_race");
      const raceTracks = document.querySelector(".racer_table");

      window.addEventListener("keyup", (event) => {
        if (event.keyCode === 81) {
          const activeBox = playerOne.querySelector(".active");
          const nextBox = activeBox.nextElementSibling;
          activeBox.classList.toggle("active");
          if (nextBox.classList.value.includes("last")) {
            nextBox.classList.add("active");
            confirm("Player 1 won!");
            raceTracks.querySelectorAll("td").forEach((td) => {
              td.classList.remove("active");
              if (td.classList.value.includes("first")) {
                td.classList.add("active");
              }
            });
          } else {
            nextBox.classList.add("active");
          }
        }
      });

      window.addEventListener("keyup", (event) => {
        if (event.keyCode === 80) {
          const activeBox = playerTwo.querySelector(".active");
          const nextBox = activeBox.nextElementSibling;
          activeBox.classList.toggle("active");
          if (nextBox.classList.value.includes("last")) {
            nextBox.classList.add("active");
            confirm("Player 2 won!");
            raceTracks.querySelectorAll("td").forEach((td) => {
              td.classList.remove("active");
              if (td.classList.value.includes("first")) {
                td.classList.add("active");
              }
            });
          } else {
            nextBox.classList.add("active");
          }
        }
      });
    </script>
  </body>
</html>
